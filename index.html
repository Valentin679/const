<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/mobile-touch.js"></script>
    <script src="js/data.js"></script>
</head>
<body>
<div class="choice">
    <h3>Вы хотите собрать конфеты или шоколадный набор?</h3>
    <div>
        <button class="candiesBtn" onclick="choiceCandies()">Набор конфет</button>
        <button class="chocoBtn" onclick="choiceChoc()">Шоколадный набор</button>
    </div>
</div>
<div class="choiceBoxSize">
    <h3>Выбор коробки</h3>
    <ul class="boxSize">
        <!--            <li data-width="210" data-height="110">210x110</li>-->
        <!--            <li data-width="120" data-height="120">120x120</li>-->
        <!--            <li data-width="200" data-height="200">200x200</li>-->
    </ul>
</div>
<button class="changeBoxSizeBtn" onclick="changeBoxSize()">Изаменить размер коробки</button>
<div class="workPlace">
    <!--    <p>сделать выбор: я хочу коробку с шоколадными формами или набор конфет -> выбор коробки (размеры/количетсво конфет)->выдать выбор-->
    <!--        ассортимента относительно коробки(в конфетах наполнителя не будет)</p>-->
    <!--    <p>рассчет стоимости из объекта цен за сырье и темперирование</p>-->
    <div id="dropBox">
    </div>
    <div id="itemBox">
        <ul>
            <li><img width="150px" src="img/otvertka.png"></li>
            <li><img width="150px" src="img/pila.png"></li>
            <li><img width="150px" src="img/pasatiji.png"></li>
        </ul>
    </div>
    <button class="addBtn">Check</button>
    <!--    <div id="popup" style="display:none">-->
    <!--        дивчик-->
    <!--    </div>-->
</div>
<div class="bot">


<!--    <div>-->
<!--        Выбор наполнителя-->
<!--        <ul class="boxInner">-->
<!--            <li data-name="kraft-bej"><img src="img/kraft-bej.jpg"></li>-->
<!--            <li data-name="kraft-gold"><img src="img/kraft-gold.jpg"></li>-->
<!--        </ul>-->
<!--    </div>-->
</div>
</body>
<script type="application/javascript">
    const dropBox = document.querySelector('#dropBox');
    const itemBox = document.querySelector('#itemBox');
    let addBtn = document.querySelector('.addBtn');
    const choiceBoxSize = document.querySelector('.choiceBoxSize');
    const changeBoxSizeBtn = document.querySelector('.changeBoxSizeBtn');
    const boxSize = document.querySelector('.boxSize');
    const boxInner = document.querySelector('.boxInner');

    const changeBoxSize = () => {
        choiceBoxSize.style.display = 'block';
        document.querySelector('.changeBoxSizeBtn').style.display = 'none';
    }
    const choiceCandies = () => {
        document.querySelector('.bot').style.display = 'block';
        // document.querySelector('.choice').style.display = 'none';
    }
    const choiceChoc = () => {
        document.querySelector('.bot').style.display = 'block';
        const boxChoc = packing.chocolate;
        const arr = Object.entries(boxChoc);
        let item = '';
        arr.map((box) => {
            item = item + '<li data-width="' + box[1].size.width +'" data-height="' + box[1].size.height +'">' + box[1].size.width + 'x' + box[1].size.height + '<br>' + box[1].color +'</li>';
        });
        boxSize.innerHTML = item;
        document.querySelector('.choice').style.display = 'none';
        document.querySelector('.choiceBoxSize').style.display = 'block';
    }

    $(function () {
        $('.addBtn').click(function () {
            $(".draggable").draggable({containment: "#dropBox", scroll: false});
        });
    });



    itemBox.addEventListener('click', (event) => {
        let parent = event.target.parentNode;
        let img = parent.querySelector('img');
        let clone = img.cloneNode(true);
        clone.classList.add('draggable');
        dropBox.append(clone)
        addBtn.click();
    });
    // console.log(packing)

    // dropBox.addEventListener('contextmenu', (event) => {
    //     event.preventDefault();
    //     let e = event.target;
    //     if (e != dropBox) {
    //
    //         const btnDelete = '<button onClick="e.remove()">Удалить изображение</button>';
    //         // e.remove();
    //         popup.style.display = 'block';
    //         popup.style.left = event.pageX - popup.offsetWidth + 'px';
    //         popup.style.top = event.pageY + 'px';
    //         popup.insertAdjacentHTML('beforeEnd', btnDelete);
    //         //зачищать html
    //         //закрывать модалку на клике вне его
    //     }
    // });
    boxSize.addEventListener('click', (event) => {
        let li = event.target;
        let width = li.dataset.width;
        let height = li.dataset.height;
        dropBox.style.width = (width * 3.65) + 'px';
        dropBox.style.height = (height * 3.65) + 'px';
        choiceBoxSize.style.display = 'none';
        document.querySelector('.changeBoxSizeBtn').style.display = 'block';
    });

    boxInner.addEventListener('click', (event) => {
        let img = event.target;
        dropBox.style.backgroundImage = 'url("' + img.src + '")';
        console.log(img.src)
    });


</script>
</html>
