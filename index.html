<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
    <meta charset="UTF-8">
    <title>Title</title>
    <style> </style>
</head>
<body>
<div class="top">
    <div id="dropBox">
    </div>
    <div id="itemBox">
        <ul>
            <li><span class="add">+</span><img width="150px" src="img/otvertka.png"></li>
            <li><span class="add">+</span><img width="150px" src="img/pila.png"></li>
            <li><span class="add">+</span><img width="150px" src="img/pasatiji.png"></li>
        </ul>
    </div>
    <button class="addBtn">Check</button>
    <div id="popup" style="display:none">
        дивчик
    </div>
</div>
<div class="bot">

    <div>
        Выбор коробки
        <ul class="boxSize">
            <li data-width="210" data-height="110">210x110</li>
            <li data-width="120" data-height="120">120x120</li>
            <li data-width="200" data-height="200">200x200</li>
        </ul>
    </div>
    <div>
        Выбор наполнителя
        <ul class="boxInner">
            <li data-name="kraft-bej"><img src="img/kraft-bej.jpg"></li>
            <li data-name="kraft-gold"><img src="img/kraft-gold.jpg"></li>
        </ul>
    </div>
</div>
</body>
<script type="application/javascript">
    $(function () {
        $('.addBtn').click(function () {
            $(".draggable").draggable({containment: "#dropBox", scroll: false});
        });
    });
    const dropBox = document.querySelector('#dropBox');
    const itemBox = document.querySelector('#itemBox');
    const popup = document.getElementById('popup');
    let addBtn = document.querySelector('.addBtn');
    const boxSize = document.querySelector('.boxSize');
    const boxInner = document.querySelector('.boxInner');


    itemBox.addEventListener('click', (event) => {
        let parent = event.target.parentNode;
        let img = parent.querySelector('img');
        let clone = img.cloneNode(true);
        clone.classList.add('draggable');
        dropBox.append(clone)
        addBtn.click();
    });

    dropBox.addEventListener('contextmenu', (event) => {
        event.preventDefault();
        let e = event.target;
        if (e != dropBox) {

            const btnDelete = '<button onClick="e.remove()">Удалить изображение</button>';
            // e.remove();
            popup.style.display = 'block';
            popup.style.left = event.pageX - popup.offsetWidth + 'px';
            popup.style.top = event.pageY + 'px';
            popup.insertAdjacentHTML('beforeEnd', btnDelete);
            //зачищать html
            //закрывать модалку на клике вне его
        }
    });
    boxSize.addEventListener('click', (event) => {
        let li = event.target;
        let width = li.dataset.width;
        let height = li.dataset.height;
        dropBox.style.width = (width * 3.65) + 'px';
        dropBox.style.height = (height * 3.65) + 'px';
    });

    boxInner.addEventListener('click', (event) => {
        let img = event.target;
        dropBox.style.backgroundImage = 'url("' + img.src + '")';
        console.log(img.src)
    });


</script>
</html>
